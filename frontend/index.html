<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Crossfire</title>
  </head>
  <body>
    <div id="app">
      <div id="total-games" class="total-games"></div>
      <header>
        <div class="header-top">
          <h1>Crossfire</h1>
          <button id="theme-toggle" class="theme-toggle" aria-label="Toggle theme">
            <span class="sun-icon">&#9728;</span>
            <span class="moon-icon">&#9790;</span>
          </button>
        </div>
        <p class="tagline">Two-player word puzzle battle</p>
        <p id="active-games" class="active-games"></p>
        <p id="total-players" class="total-players"></p>
        <div id="player-id-display" class="player-id-display">
          <span class="player-id-label">Your ID:</span>
          <span id="player-id" class="player-id"></span>
          <button id="change-id-btn" class="change-id-btn" title="Change ID">&#9998;</button>
        </div>
        <div id="change-id-form" class="change-id-form hidden">
          <input type="text" id="new-id-input" placeholder="Enter existing ID" />
          <button id="save-id-btn" class="small-btn">Use This ID</button>
          <button id="cancel-id-btn" class="small-btn secondary">Cancel</button>
        </div>
        <div id="player-stats" class="player-stats">
          <span class="level-badge">Level <span id="player-level">1</span></span>
          <span class="wins-info"><span id="player-wins">0</span> <span id="wins-label">wins</span> • <span id="wins-to-next">1</span> to next level</span>
        </div>
      </header>

      <!-- Connecting / Matchmaking Screen -->
      <section id="screen-menu" class="screen">
        <button id="find-match-btn" class="primary-btn">Play Now</button>
        <p id="status-text"></p>

        <div class="divider">Play with a friend</div>

        <p class="room-help">Make up any room name and share it with a friend. You'll both join the same game!</p>
        <div class="manual-join">
          <input type="text" id="room-id-input" placeholder="e.g. pizza-party" />
          <button id="join-room-btn">Join Room</button>
        </div>
      </section>

      <!-- Waiting for opponent -->
      <section id="screen-waiting" class="screen hidden">
        <div class="spinner"></div>
        <p>Waiting for opponent...</p>
        <p id="waiting-info"></p>
        <button id="leave-waiting-btn" class="secondary-btn leave-waiting-btn">Leave Room</button>
      </section>

      <!-- Word Submission Phase -->
      <section id="screen-submit" class="screen hidden">
        <div id="submit-form-section">
          <h2>Pick 4 Words</h2>
          <div id="submit-opponent-info" class="opponent-info submit-opponent-info">
            <span>vs <span id="submit-opponent-name"></span></span>
            <span class="opponent-level-badge">Level <span id="submit-opponent-level">1</span></span>
          </div>
          <p class="submit-instructions"><strong>Choose any 4 words</strong> — your opponent will have to guess them in a crossword puzzle!</p>
          <div id="timer-submit" class="timer"></div>

          <form id="word-form">
            <div class="word-input-wrapper">
              <div class="word-input-row">
                <input type="text" class="word-input" placeholder="e.g. PIZZA" maxlength="12" required autocapitalize="characters" enterkeyhint="next" />
                <div class="inline-suggestions"></div>
              </div>
              <span class="word-error"></span>
            </div>
            <div class="word-input-wrapper">
              <div class="word-input-row">
                <input type="text" class="word-input" placeholder="e.g. BEACH" maxlength="12" required autocapitalize="characters" enterkeyhint="next" />
                <div class="inline-suggestions"></div>
              </div>
              <span class="word-error"></span>
            </div>
            <div class="word-input-wrapper">
              <div class="word-input-row">
                <input type="text" class="word-input" placeholder="e.g. MUSIC" maxlength="12" required autocapitalize="characters" enterkeyhint="next" />
                <div class="inline-suggestions"></div>
              </div>
              <span class="word-error"></span>
            </div>
            <div class="word-input-wrapper">
              <div class="word-input-row">
                <input type="text" class="word-input" placeholder="e.g. CLOUD" maxlength="12" required autocapitalize="characters" enterkeyhint="done" />
                <div class="inline-suggestions"></div>
              </div>
              <span class="word-error"></span>
            </div>
            <button type="submit" class="primary-btn">Submit Words</button>
            <div id="form-error" class="form-error hidden"></div>
          </form>
          <button id="leave-submit-btn" class="secondary-btn leave-room-btn">Leave Room</button>
        </div>

        <div id="submit-waiting-section" class="hidden">
          <div class="spinner"></div>
          <p id="submit-status">Waiting for opponent...</p>
        </div>
      </section>

      <!-- Solving Phase -->
      <section id="screen-solve" class="screen hidden">
        <div class="solve-header">
          <div class="opponent-info">
            <span>vs <span id="opponent-name-display"></span></span>
            <span class="opponent-level-badge">Level <span id="opponent-level">1</span></span>
          </div>
          <div class="progress-display">
            <span>You: <span id="your-progress">0%</span></span>
            <span>Opponent: <span id="opponent-progress">0%</span></span>
          </div>
          <div class="timer-row">
            <div id="timer-solve" class="timer"></div>
            <div id="penalty-display" class="penalty-display hidden">+<span id="penalty-time">0</span>s</div>
          </div>
        </div>

        <div id="crossword-container"></div>

        <p class="hint-info">Hold or right-click a cell for a hint (<span id="hints-remaining">4</span> hints available)</p>
        <button id="leave-solve-btn" class="secondary-btn leave-room-btn">Leave Room</button>
      </section>

      <!-- Results Screen -->
      <section id="screen-results" class="screen hidden">
        <h2 id="result-title"></h2>
        <div id="result-details"></div>
        <div id="solution-container" class="solution-container hidden">
          <h3>The Solution</h3>
          <div id="solution-grid"></div>
        </div>
        <div class="results-buttons">
          <button id="leave-room-btn" class="primary-btn">Find New Match</button>
        </div>
      </section>

      <!-- Error display -->
      <div id="error-toast" class="error-toast hidden"></div>

      <!-- Hint notification -->
      <div id="hint-toast" class="hint-toast hidden">3 hints left</div>
    </div>
    <script type="module" src="/src/main.ts"></script>
  </body>
</html>
