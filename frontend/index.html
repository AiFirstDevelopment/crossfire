<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- Primary Meta Tags -->
    <title>Crossfire - Free Online Word Puzzle Battle Game</title>
    <meta name="title" content="Crossfire - Free Online Word Puzzle Battle Game" />
    <meta name="description" content="Challenge friends to real-time word puzzle battles! Pick 4 words for your opponent to solve in a crossword. Free multiplayer word game - no download required." />
    <meta name="keywords" content="word game, crossword puzzle, multiplayer game, word battle, online puzzle, free word game, brain game, vocabulary game" />
    <meta name="author" content="Crossfire" />
    <meta name="robots" content="index, follow" />
    <link rel="canonical" href="https://crossfire.game/" />

    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <link rel="apple-touch-icon" href="/vite.svg" />

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://crossfire.game/" />
    <meta property="og:title" content="Crossfire - Free Online Word Puzzle Battle Game" />
    <meta property="og:description" content="Challenge friends to real-time word puzzle battles! Pick 4 words for your opponent to solve in a crossword. Free multiplayer word game." />
    <meta property="og:image" content="https://playcrossfire.live/og-image.png" />
    <meta property="og:site_name" content="Crossfire" />

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image" />
    <meta property="twitter:url" content="https://crossfire.game/" />
    <meta property="twitter:title" content="Crossfire - Free Online Word Puzzle Battle Game" />
    <meta property="twitter:description" content="Challenge friends to real-time word puzzle battles! Pick 4 words for your opponent to solve in a crossword." />
    <meta property="twitter:image" content="https://playcrossfire.live/og-image.png" />

    <!-- Structured Data -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebApplication",
      "name": "Crossfire",
      "description": "A real-time multiplayer word puzzle battle game where players pick words for opponents to solve in crossword format.",
      "url": "https://crossfire.game",
      "applicationCategory": "GameApplication",
      "genre": "Word Game",
      "operatingSystem": "Any",
      "offers": {
        "@type": "Offer",
        "price": "0",
        "priceCurrency": "USD"
      },
      "aggregateRating": {
        "@type": "AggregateRating",
        "ratingValue": "4.5",
        "ratingCount": "50"
      }
    }
    </script>

    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=AW-17918914377"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'AW-17918914377');
    </script>

    <!-- Google AdSense -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9275404280127308"
     crossorigin="anonymous"></script>
  </head>
  <body>
    <div id="app">
      <div id="total-games" class="total-games"></div>
      <header>
        <div class="header-top">
          <h1 id="logo" title="Version: v1.0.1">Crossfire</h1>
          <button id="theme-toggle" class="theme-toggle" aria-label="Toggle theme">
            <span class="sun-icon">&#9728;</span>
            <span class="moon-icon">&#9790;</span>
          </button>
        </div>
        <p class="tagline">Two-player word puzzle battle</p>
        <p id="active-games" class="active-games"></p>
        <p id="total-players" class="total-players"></p>
        <div id="player-id-display" class="player-id-display">
          <span class="player-id-label">Your ID:</span>
          <span id="player-id" class="player-id"></span>
          <button id="change-id-btn" class="change-id-btn" title="Change ID">&#9998;</button>
        </div>
        <div id="change-id-form" class="change-id-form hidden">
          <input type="text" id="new-id-input" placeholder="Enter existing ID" />
          <button id="save-id-btn" class="small-btn">Use This ID</button>
          <button id="cancel-id-btn" class="small-btn secondary">Cancel</button>
        </div>
        <div id="player-stats" class="player-stats">
          <span class="level-badge">Level <span id="player-level">1</span></span>
          <span class="wins-info"><span id="player-wins">0</span> <span id="wins-label">wins</span> • <span id="wins-to-next">1</span> to next level</span>
        </div>
        <div id="streak-display" class="streak-display hidden">
          <span id="win-streak" class="win-streak"></span>
          <span id="daily-streak" class="daily-streak"></span>
        </div>
      </header>

      <!-- Daily Challenge Banner -->
      <div id="daily-challenge" class="daily-challenge hidden">
        <div class="daily-challenge-header">
          <span class="daily-challenge-icon">&#9733;</span>
          <span>Daily Challenge</span>
        </div>
        <div class="daily-challenge-content">
          <span id="daily-challenge-desc"></span>
          <div class="daily-challenge-progress-container">
            <div class="daily-challenge-bar-bg">
              <div id="daily-challenge-bar" class="daily-challenge-bar"></div>
            </div>
            <span id="daily-challenge-status" class="daily-challenge-status"></span>
          </div>
        </div>
      </div>

      <!-- Connecting / Matchmaking Screen -->
      <section id="screen-menu" class="screen">
        <button id="find-match-btn" class="primary-btn">Play Now</button>
        <p id="status-text"></p>
        <button id="cancel-matchmaking-btn" class="secondary-btn hidden">Cancel</button>

        <div class="divider">Challenge a Friend</div>

        <div class="challenge-card">
          <p class="challenge-tagline">Create a room, share the link, and pick your hardest words!</p>
          <div class="manual-join">
            <input type="text" id="room-id-input" placeholder="e.g. pizza-party" />
            <button id="join-room-btn">Enter Room</button>
          </div>
          <p id="friend-battles-count" class="friend-battles-count hidden"></p>
          <button id="view-h2h-btn" class="link-btn hidden">View history</button>
        </div>

        <!-- Leaderboard Section -->
        <div class="divider">Weekly Leaderboard</div>
        <div id="leaderboard-section" class="leaderboard-section">
          <div id="leaderboard-list" class="leaderboard-list"></div>
          <div id="player-rank-display" class="player-rank-display hidden">
            Your rank: <span id="player-rank">#--</span> (<span id="player-weekly-wins">0</span> wins this week)
          </div>
        </div>

        <!-- Achievements Section -->
        <div class="divider">Achievements</div>
        <div id="achievements-section" class="achievements-section">
          <div id="achievements-list" class="achievements-list"></div>
        </div>
      </section>

      <!-- Waiting for opponent -->
      <section id="screen-waiting" class="screen hidden">
        <div class="spinner"></div>
        <p id="waiting-info">Waiting for opponent...</p>
        <div id="share-link-section" class="share-link-section">
          <p class="share-link-label">Share this link with a friend:</p>
          <div class="share-link-row">
            <input type="text" id="share-link-input" class="share-link-input" readonly />
            <button id="copy-link-btn" class="small-btn">Copy</button>
          </div>
          <p id="copy-feedback" class="copy-feedback hidden">Link copied!</p>
        </div>
        <button id="leave-waiting-btn" class="secondary-btn leave-waiting-btn">Leave Room</button>
      </section>

      <!-- Word Submission Phase -->
      <section id="screen-submit" class="screen hidden">
        <div id="submit-form-section">
          <h2>Pick 4 Words</h2>
          <div id="submit-opponent-info" class="opponent-info submit-opponent-info">
            <span>vs <span id="submit-opponent-name"></span></span>
            <span class="opponent-level-badge">Level <span id="submit-opponent-level">1</span></span>
          </div>
          <p class="submit-instructions"><strong>Choose any 4 words</strong> — your opponent will have to guess them in a crossword puzzle!</p>
          <div id="timer-submit" class="timer"></div>

          <form id="word-form">
            <div class="word-input-wrapper">
              <div class="word-input-row">
                <input type="text" class="word-input" placeholder="e.g. PIZZA" maxlength="12" required autocapitalize="characters" enterkeyhint="next" />
                <div class="inline-suggestions"></div>
              </div>
              <span class="word-error"></span>
            </div>
            <div class="word-input-wrapper">
              <div class="word-input-row">
                <input type="text" class="word-input" placeholder="e.g. BEACH" maxlength="12" required autocapitalize="characters" enterkeyhint="next" />
                <div class="inline-suggestions"></div>
              </div>
              <span class="word-error"></span>
            </div>
            <div class="word-input-wrapper">
              <div class="word-input-row">
                <input type="text" class="word-input" placeholder="e.g. TIGER" maxlength="12" required autocapitalize="characters" enterkeyhint="next" />
                <div class="inline-suggestions"></div>
              </div>
              <span class="word-error"></span>
            </div>
            <div class="word-input-wrapper">
              <div class="word-input-row">
                <input type="text" class="word-input" placeholder="e.g. CLOUD" maxlength="12" required autocapitalize="characters" enterkeyhint="done" />
                <div class="inline-suggestions"></div>
              </div>
              <span class="word-error"></span>
            </div>
            <button type="submit" class="primary-btn">Submit Words</button>
            <div id="form-error" class="form-error hidden"></div>
          </form>
          <button id="leave-submit-btn" class="secondary-btn leave-room-btn">Leave Room</button>
        </div>

        <div id="submit-waiting-section" class="hidden">
          <div class="spinner"></div>
          <p id="submit-status">Waiting for opponent...</p>
        </div>
      </section>

      <!-- Solving Phase -->
      <section id="screen-solve" class="screen hidden">
        <div class="solve-header">
          <div class="opponent-info">
            <span>vs <span id="opponent-name-display"></span></span>
            <span class="opponent-level-badge">Level <span id="opponent-level">1</span></span>
          </div>
          <div class="progress-display">
            <span>You: <span id="your-progress">0%</span></span>
            <span>Opponent: <span id="opponent-progress">0%</span></span>
          </div>
          <div class="timer-row">
            <div id="timer-solve" class="timer"></div>
            <div id="penalty-display" class="penalty-display hidden">+<span id="penalty-time">0</span>s</div>
          </div>
        </div>

        <div id="crossword-container"></div>

        <p class="hint-info">Hold or right-click a cell for a hint (<span id="hints-remaining">4</span> hints available)</p>
        <button id="leave-solve-btn" class="secondary-btn leave-room-btn">Leave Room</button>
      </section>

      <!-- Results Screen -->
      <section id="screen-results" class="screen hidden">
        <h2 id="result-title"></h2>
        <div id="result-streak-display" class="result-streak-display hidden"></div>
        <div id="new-achievements" class="new-achievements hidden"></div>
        <div id="daily-challenge-complete" class="daily-challenge-complete hidden">
          <span class="challenge-complete-icon">&#9733;</span>
          <span>Daily Challenge Complete!</span>
        </div>
        <div id="result-details"></div>
        <div id="solution-container" class="solution-container hidden">
          <h3>The Solution</h3>
          <div id="solution-grid"></div>
        </div>
        <!-- AdSense Ad (Results Screen) -->
        <div id="results-ad-container" class="results-ad-container">
          <ins class="adsbygoogle"
               style="display:block"
               data-ad-client="ca-pub-9275404280127308"
               data-ad-slot="6942531764"
               data-ad-format="auto"
               data-full-width-responsive="true"></ins>
        </div>

        <!-- Head-to-head record (for rematches) -->
        <div id="head-to-head" class="head-to-head hidden">
          <span class="h2h-label">vs <span id="h2h-opponent"></span>:</span>
          <span id="h2h-record" class="h2h-record"></span>
        </div>

        <!-- Challenge prompt (shown after bot games) -->
        <div id="challenge-prompt" class="challenge-prompt hidden">
          <p>Think you're good? Challenge a friend to beat your score!</p>
          <button id="challenge-friend-btn" class="challenge-friend-btn">Challenge a Friend</button>
        </div>

        <!-- Rematch section (for multiplayer games) -->
        <div id="rematch-section" class="rematch-section hidden">
          <button id="rematch-btn" class="rematch-btn">Rematch</button>
          <p id="rematch-status" class="rematch-status hidden"></p>
          <div id="rematch-request" class="rematch-request hidden">
            <p>Opponent wants a rematch!</p>
            <div class="rematch-actions">
              <button id="accept-rematch-btn" class="accept-btn">Accept</button>
              <button id="decline-rematch-btn" class="decline-btn">Decline</button>
            </div>
          </div>
        </div>

        <div class="results-buttons">
          <button id="leave-room-btn" class="primary-btn">Find New Match</button>
          <button id="back-to-menu-btn" class="secondary-btn">Back to Menu</button>
        </div>
      </section>

      <!-- Victory Confetti Container -->
      <div id="confetti-container" class="confetti-container hidden"></div>

      <!-- Error display -->
      <div id="error-toast" class="error-toast hidden"></div>

      <!-- Hint notification -->
      <div id="hint-toast" class="hint-toast hidden">3 hints left</div>

      <!-- Achievement notification -->
      <div id="achievement-toast" class="achievement-toast hidden">
        <span class="achievement-icon">&#127942;</span>
        <span id="achievement-text">Achievement Unlocked!</span>
      </div>

      <!-- Streak notification -->
      <div id="streak-toast" class="streak-toast hidden">
        <span class="streak-icon">&#128293;</span>
        <span id="streak-text">3 Win Streak!</span>
      </div>

      <!-- Maintenance warning banner -->
      <div id="maintenance-banner" class="maintenance-banner hidden">
        <div class="maintenance-content">
          <span class="maintenance-icon">&#9888;</span>
          <span class="maintenance-text">Improving your experience — update coming shortly after <span id="maintenance-time">--:--</span></span>
          <span class="maintenance-subtext">Your page will reload automatically when ready</span>
        </div>
      </div>

      <!-- Rematch Request Modal -->
      <div id="rematch-modal" class="modal-overlay hidden">
        <div class="modal-content">
          <div class="modal-icon">&#9876;</div>
          <h3>Rematch Request</h3>
          <p>Your opponent wants a rematch!</p>
          <div class="modal-actions">
            <button id="modal-accept-btn" class="accept-btn">Accept</button>
            <button id="modal-decline-btn" class="decline-btn">Decline</button>
          </div>
        </div>
      </div>

      <!-- H2H History Modal -->
      <div id="h2h-modal" class="modal-overlay hidden">
        <div class="modal-content h2h-modal-content">
          <h3>Friend Battles</h3>
          <div id="h2h-list" class="h2h-list"></div>
          <div class="modal-actions">
            <button id="h2h-close-btn" class="secondary-btn">Close</button>
          </div>
        </div>
      </div>

      <!-- Cookie Consent Banner -->
      <div id="cookie-consent" class="cookie-consent hidden">
        <div class="cookie-content">
          <p>We use cookies to improve your experience and show relevant ads. By continuing, you agree to our <a href="/privacy.html">Privacy Policy</a> and <a href="/terms.html">Terms of Service</a>.</p>
          <div class="cookie-buttons">
            <button id="cookie-accept-all" class="cookie-btn primary">Accept All</button>
            <button id="cookie-essential" class="cookie-btn secondary">Essential Only</button>
          </div>
        </div>
      </div>

      <!-- Footer Links -->
      <footer class="site-footer">
        <a href="/privacy.html">Privacy Policy</a>
        <span class="footer-divider">|</span>
        <a href="/terms.html">Terms of Service</a>
      </footer>
    </div>
    <script type="module" src="/src/main.ts"></script>
  </body>
</html>
